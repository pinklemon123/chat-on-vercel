:root { --panel:#0f172a; --panel2:#0b1220; --border:#1e293b; --text:#e6f0ff; --fg:#98b7ff; --blue:#2b6bff; }
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:
  radial-gradient(1200px 600px at 70% -10%, #19365c 0, #0b1220 60%, #070b12 100%);
color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
.page{min-height:100%;display:flex;align-items:center;justify-content:center;padding:32px}
.glass{
  width:min(960px,100%); height:min(88vh,980px);
  display:flex;flex-direction:column; gap:12px;
  background:color-mix(in oklab, var(--panel) 80%, transparent 20%);
  border:1px solid var(--border); border-radius:20px; padding:16px;
  backdrop-filter: blur(10px); box-shadow:0 20px 60px rgba(0,0,0,.35);
}
header{display:flex;align-items:center;justify-content:space-between;padding:6px 4px 0}
h1{margin:0;font-size:18px;letter-spacing:.3px;color:var(--fg)}
.toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.switch{display:flex;gap:6px;align-items:center}
.import-btn{position:relative;border:1px solid var(--border);padding:6px 10px;border-radius:10px;cursor:pointer}
.import-btn input{position:absolute;inset:0;opacity:0;cursor:pointer}

main#chat{
  flex:1; overflow:auto; padding:8px; border-radius:14px;
  background:linear-gradient(180deg, #0b1220aa, #0f172aaa);
  border:1px solid var(--border);
}

/* 氣泡 */
.bubble{display:flex;gap:10px;margin:10px 6px;align-items:flex-end;max-width:90%}
.bubble.assistant{flex-direction:row}
.bubble.user{flex-direction:row-reverse;margin-left:auto}
.avatar{
  flex:0 0 auto; width:32px; height:32px; border-radius:50%;
  display:grid;place-items:center;font-size:12px;opacity:.8;
  background:#0b1a34;border:1px solid #243045;color:#cfe3ff
}
.body{padding:10px 12px;border-radius:14px;white-space:pre-wrap;border:1px solid var(--border);background:#0e1a33;color:var(--text)}
.bubble.user .body{background:#0f213d}
.bubble.assistant .body{background:#0b1326}

/* 输入区 */
#composer{display:flex;gap:10px;align-items:flex-end}
#q{flex:1;resize:vertical;min-height:44px;max-height:220px;padding:12px;border-radius:14px;border:1px solid var(--border);background:var(--panel2);color:var(--text)}
#q:disabled{opacity:.6}
#send{height:44px;padding:0 18px;border:0;border-radius:12px;background:var(--blue);color:#fff;cursor:pointer}
#send[disabled]{filter:saturate(.3);cursor:not-allowed}
#send:hover:not([disabled]){filter:brightness(1.1)}

.active-bar{margin:6px 4px -2px;color:#cfe3ff;opacity:.8;font-size:.9rem}
.hidden{display:none}

/* 侧栏 */
.drawer{position:absolute;left:50%;transform:translateX(-50%);width:min(960px,100%);display:grid;grid-template-columns:280px 1fr;gap:12px;background:var(--panel2);border:1px solid var(--border);border-radius:16px;padding:12px;box-shadow:0 12px 40px rgba(0,0,0,.4)}
.drawer-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.prompt-list{display:flex;flex-direction:column;gap:6px;max-height:55vh;overflow:auto;border:1px solid var(--border);border-radius:10px;padding:8px}
.prompt-item{all:unset;padding:8px;border:1px solid var(--border);border-radius:10px;cursor:pointer}
.prompt-item.active{background:#0f213d}
.prompt-editor{border:1px solid var(--border);border-radius:10px;padding:10px}
.row{display:flex;flex-direction:column;gap:6px;margin:8px 0}
.row input,.row select,.row textarea{background:#0b1220;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px}
.actions{display:flex;gap:8px}
.danger{background:#2a0b0b}
/* 页签导航 */
.tabs{display:flex;gap:10px;align-items:center}
.tabs a{
  text-decoration:none;color:var(--text);opacity:.7;
  padding:6px 10px;border-radius:10px;border:1px solid transparent
}
.tabs a.active{
  opacity:1;border-color:var(--border);background:#0f213d
}
@media (max-width:720px){
  header{flex-direction:column;align-items:flex-start;gap:8px}
  .toolbar{width:100%}
}
/* 分栏布局 */
.glass.split{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap:12px;
  height:min(88vh, 980px);
}

/* 左侧面板常驻（取代旧抽屉绝对定位） */
.drawer{
  position:static;
  width:auto; height:auto;
  display:flex; flex-direction:column; gap:10px;
  background:var(--panel2);
  border:1px solid var(--border);
  border-radius:16px;
  padding:12px;
}
.drawer-head{display:flex;justify-content:space-between;align-items:center}
.drawer-actions{display:flex;gap:8px}
.only-mobile{display:none}

.workspace{display:flex;flex-direction:column;min-width:0}
.bar{display:flex;align-items:center;justify-content:space-between;padding:6px 4px 0}

/* 移动端：上下堆叠，左栏可折叠 */
@media (max-width: 960px){
  .glass.split{
    grid-template-columns: 1fr;
    grid-template-rows: auto auto 1fr auto;
    gap:10px;
  }
  .only-mobile{display:inline-block}
  .drawer.collapsed{display:none}
}

